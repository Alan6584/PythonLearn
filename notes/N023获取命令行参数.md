###通过 sys 获取命令行参数

####一、sys 模块

在 Python 中，通过 sys 模块中的 sys.argv 可以访问到所有的命令行参数，它的返回值是包含所有命令行参数的列表。

- sys.argv ：是命令行参数列表
- len(sys.argv) ：是命令行参数个数
- sys.argv[0]：参数1
- sys.argv[1]：参数2

**实例**

```python
#!/usr/bin/python
# -*- coding: UTF-8 -*-
"""
@Time    : 2018-04-11 17：58
@Author  : jianjun.wang
@Email   : alanwang6584@gmail.com
"""

import sys

def main():
	print 'arg num : ', len(sys.argv)
	print 'args : ', sys.argv
	print 'script name : ', sys.argv[0]

	for i in range(len(sys.argv)):
		print "arg[{0}] = {1}".format(i, sys.argv[i])

if __name__ == "__main__":
    main()
```

命令行中输入：python D023_get_arg_sys.py alan 3

**输出**

```
arg num :  3
args :  ['D023_get_arg_sys.py', 'alan', '3']
script name :  D023_get_arg_sys.py
arg[0] = D023_get_arg_sys.py
arg[1] = alan
arg[2] = 3
```



#### 二、getopt 模块

有时候我们需要传递多个参数，每个参数表示不同的含义，而且有时候有的参数有，有的参数没有。比如我们需要从打点文件（file）中分析某国家（country）某个版本（version）的统计结果，可以看到这里有四个参数：脚本名、file、country、country，但有时可能从文件中查某版本的（只有 脚本名、file、version 参数），或查某国家的（脚本名、file、country 参数），这时用 sys 模块就比较麻烦了，因为，第三个参数有可能是 country、也可能是  version，也可能都没有（如分析该文件中所有国家所有版本的数据）。这时用 getopt 就可以很好的解决这个需求。

getopt 模块是专门处理命令行参数的模块，用于获取命令行选项和参数，也就是sys.argv。命令行选项使得程序的参数更加灵活。支持短选项模式（-）和长选项模式（--）。

该模块提供了两个方法及一个异常处理来解析命令行参数。

**getopt.getopt 方法**

getopt.getopt 方法用于解析命令行参数列表，语法格式如下：

```python
getopt.getopt(args, options[, long_options])
```

方法参数说明：

- args: 要解析的命令行参数列表。
- options: 以字符串的格式定义，options后的冒号(:)表示该选项必须有附加的参数，不带冒号表示该选项不附加参数。
- long_options: 以列表的格式定义，long_options 后的等号(=)表示如果设置该选项，必须有附加的参数，否则就不附加参数。
- 该方法返回值由两个元素组成: 第一个是 (option, value) 元组的列表。 第二个是参数列表，包含那些没有 ’-‘ 或 ’–’ 的参数。

**getopt.GetoptError 异常**

在没有找到参数列表，或选项的需要的参数为空时会触发该异常。

异常的参数是一个字符串，表示错误的原因。属性 msg 和 opt 为相关选项的错误信息。

**实例**

